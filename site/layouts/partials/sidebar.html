<aside class="menu is-flex">
  <div class="sticky-sidebar">
    <div class="is-main-link">
      <a href="{{ .Site.BaseURL }}">
        <h1>Documenters<br>Field Guide</h1>
      </a>
    </div>
    <div>
      <ul class="menu-list">
        {{ $site := .Site }}
        {{ $page := . }}
        {{ range .Site.Menus.main -}}
        {{ $children := where (where $site.RegularPages ".Section" .Identifier) ".Params.inmenu" true }}
        <li>
          {{ $toggleClass := cond (gt (len $children) 0) "toggle" "" }}
          <a
            {{ if eq $page.URL .URL }}
            class="is-page active {{ $toggleClass }}"
            {{ else if hasPrefix $page.URL .URL }}
            class="active {{ $toggleClass }}"
            {{ else }}
            class="{{ $toggleClass }}"
            {{ end }}
            {{ if eq (len $children) 0 }}
            href="{{.URL}}"
            {{ end }}
          >{{ .Name }}</a>
          {{if gt (len $children) 0 }}
          <ul>
            {{ range sort $children ".Params.order" }}
            <li>
              <a
                {{if eq $page.URL .URL }}
                class="is-page"
                {{end}}
                href="{{ .URL }}"
              >{{ .Name }}</a>
            </li>
            {{ end }}
          </ul>
          {{ end }}
        </li>
        {{- end }}
      </ul>
    </div>
  </div>
</aside>
